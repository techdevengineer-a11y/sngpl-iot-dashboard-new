import{r as x,a as g,j as e}from"./index-CuPLTIq6.js";import{L as j}from"./Layout-Bhj-hCGg.js";import{E as d}from"./eye-DsZQJS_t.js";import{A as c}from"./activity-DvS__W_y.js";import{W as f}from"./wifi-off-C9qm20-S.js";import{A as u}from"./alert-circle-Dx3ewC63.js";import{T as N,W as y}from"./wind-BnPc78kP.js";import{G as w}from"./gauge-C3G_6xek.js";import{B as v}from"./battery-wNEowIjo.js";import{M as b}from"./map-pin-DeCLRHw5.js";import{T as k}from"./trash-2-BF0OiL1R.js";import"./createLucideIcon-Bp_Bh7vc.js";const W=()=>{const[t,i]=x.useState([]),l=g();x.useEffect(()=>{n();const s=setInterval(()=>{n()},1e4);return()=>clearInterval(s)},[]);const n=()=>{const s=localStorage.getItem("observed_devices");if(s)try{i(JSON.parse(s))}catch(a){console.error("Error loading observed devices:",a),i([])}},o=(s,a)=>{a.stopPropagation();const r=t.filter(h=>h.id!==s);i(r),localStorage.setItem("observed_devices",JSON.stringify(r))},m=(s,a)=>{l(`/stations/${a}`)},p=s=>s?s>=12.5?"text-green-600":s>=11.8?"text-yellow-600":"text-red-600":"text-gray-500";return e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(d,{className:"w-8 h-8 text-blue-600"}),"Under Observation"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Devices you're monitoring closely - ",t.length," device",t.length!==1?"s":""]})]}),e.jsx("button",{onClick:()=>l("/sections"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Browse Sections"})]})}),t.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"glass rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Online Devices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(s=>s.is_active).length})]})]})}),e.jsx("div",{className:"glass rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Offline Devices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(s=>!s.is_active).length})]})]})}),e.jsx("div",{className:"glass rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Observed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})})]}),t.length===0?e.jsxs("div",{className:"glass rounded-xl p-12 text-center",children:[e.jsx(u,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Devices Under Observation"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add devices from the Sections page to monitor them here for quick access"}),e.jsx("button",{onClick:()=>l("/sections"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Browse Sections"})]}):e.jsx("div",{className:"glass rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Device"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-3 h-3"}),"Temp (Â°F)"]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"}),"Static P (PSI)"]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-3 h-3"}),"Diff P (IWC)"]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),"Battery"]})}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((s,a)=>e.jsxs("tr",{onClick:()=>m(s.section_id,s.id),className:"hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a+1})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.device_name||s.client_id}),e.jsx("div",{className:"text-xs text-gray-600",children:s.client_id}),s.location&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 mt-1",children:[e.jsx(b,{className:"w-3 h-3"}),s.location]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.jsx(c,{className:"w-3 h-3"}),s.is_active?"Online":"Offline"]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:s.temperature?s.temperature.toFixed(1):"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:s.static_pressure?s.static_pressure.toFixed(1):"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:s.differential_pressure?s.differential_pressure.toFixed(1):"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${p(s.battery)}`,children:s.battery?`${s.battery.toFixed(1)}V`:"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsxs("button",{onClick:r=>o(s.id,r),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors",title:"Remove from observation",children:[e.jsx(k,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Remove"})]})})]},s.id))})]})})}),t.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(c,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Quick Access to Your Key Devices"}),e.jsx("p",{className:"text-blue-700",children:'Click on any row to view device details. To add more devices, visit the Sections page and click "Observe" on any device.'})]})]})})]})})};export{W as default};
