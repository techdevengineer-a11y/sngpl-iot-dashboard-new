import{b as Ke,a as We,r,j as e}from"./index-CuPLTIq6.js";import{L as K}from"./Layout-Bhj-hCGg.js";import{E as Be}from"./ExportModal-BX3XtV_d.js";import{A as Ve}from"./alert-triangle-CENt64Gl.js";import{m as u}from"./motion-8SLn2u6e.js";import{A as Ue}from"./arrow-left-DI3Uksat.js";import{M as Xe}from"./map-pin-DeCLRHw5.js";import{C as W}from"./clock-CARLuty7.js";import{W as xe,T as me}from"./wind-BnPc78kP.js";import{G as pe}from"./gauge-C3G_6xek.js";import{D as he}from"./droplets-DPI-7e7N.js";import{B as fe}from"./battery-wNEowIjo.js";import{T as ge}from"./trending-up-KnywOmps.js";import{R as w,A as b,C as D,X as S,Y as N,T as v,a as k}from"./AreaChart-DqSnVAAS.js";import{D as Ye}from"./download-BIeXtM7T.js";import"./x-BHP2hNWw.js";import"./createLucideIcon-Bp_Bh7vc.js";import"./calendar-BHWY2O9g.js";import"./file-spreadsheet-BNFMNFvj.js";import"./database-Cj7RBCxv.js";import"./string-9MY7XALd.js";const Pt=()=>{var ae,re,ne,ie,oe,le,ce;const{deviceId:m}=Ke(),B=We(),[p,V]=r.useState(null),[ue,je]=r.useState(!0),[h,U]=r.useState([]),[ye,X]=r.useState(null),[qe,Y]=r.useState([]),c=()=>{const t=new Date;return t.setHours(t.getHours()-24),t.toISOString().slice(0,16)},d=()=>new Date().toISOString().slice(0,16),[Je,Qe]=r.useState(c()),[Ze,we]=r.useState(d()),[et,tt]=r.useState(c()),[st,be]=r.useState(d()),[at,rt]=r.useState(c()),[nt,De]=r.useState(d()),[it,ot]=r.useState(c()),[lt,Se]=r.useState(d()),[ct,dt]=r.useState(c()),[xt,Ne]=r.useState(d()),[mt,pt]=r.useState(c()),[ht,ve]=r.useState(d()),[_,ke]=r.useState(c()),[T,_e]=r.useState(d()),[C,Te]=r.useState(c()),[F,Ce]=r.useState(d()),[E,Fe]=r.useState(c()),[H,Ee]=r.useState(d()),[M,He]=r.useState(c()),[$,Me]=r.useState(d()),[L,$e]=r.useState(c()),[I,Le]=r.useState(d()),[O,Ie]=r.useState(c()),[P,Oe]=r.useState(d()),[R,Pe]=r.useState(c()),[z,Re]=r.useState(d()),[q,ze]=r.useState(c()),[J,Q]=r.useState(d()),[Ge,Z]=r.useState(!1);r.useEffect(()=>{ee(),te();const t=setInterval(()=>{ee(),te()},2e3),s=setInterval(()=>{const a=new Date().toISOString().slice(0,16);we(a),be(a),De(a),Se(a),Ne(a),ve(a),Q(a)},5e3);return()=>{clearInterval(t),clearInterval(s)}},[m]);const ee=async()=>{try{const t=await fetch("/api/devices/");if(t.ok){const a=(await t.json()).find(i=>i.id===parseInt(m||"0"));a?V(a):G()}else G()}catch(t){console.error("Error fetching device data:",t),G()}finally{je(!1)}},te=async()=>{try{const t=await fetch(`/api/analytics/readings?device_id=${m}&page_size=1000&page=1`);if(t.ok){const a=(await t.json()).data||[];if(console.log(`[StationDetail] Fetched ${a.length} readings for device ${m}`),a&&a.length>0){const i=a.sort((l,x)=>new Date(x.timestamp).getTime()-new Date(l.timestamp).getTime());U(i),X(i[0]),console.log("[StationDetail] Latest reading:",i[0]);const o=i.map(l=>({timestamp:new Date(l.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),voltage:l.battery||12.5,color:(l.battery||12.5)>=12.5?"#16a34a":(l.battery||12.5)>=11.8?"#eab308":"#dc2626"}));Y(o)}else console.log("[StationDetail] No readings found, generating mock data"),A()}else console.error("[StationDetail] API failed with status:",t.status),A()}catch(t){console.error("Error fetching historical data:",t),A()}},G=()=>{const t={id:parseInt(m||"1"),client_id:`SMS-${m}`,device_name:`Station ${m}`,location:`Section ${Math.ceil(parseInt(m||"1")/80)} - Location ${m}`,is_active:Math.random()>.2,last_seen:new Date(Date.now()-Math.random()*36e5).toISOString(),latest_reading:{timestamp:new Date().toISOString(),temperature:60+Math.random()*50,static_pressure:40+Math.random()*60,max_static_pressure:50+Math.random()*80,min_static_pressure:30+Math.random()*40,differential_pressure:50+Math.random()*200,volume:5e3+Math.random()*1e4,total_volume_flow:1e4+Math.random()*15e3,battery:11.5+Math.random()*2}};V(t)},A=()=>{const t=new Date,s=[],a=[];for(let i=167;i>=0;i--){const o=new Date(t.getTime()-i*60*60*1e3),l=11.5+Math.random()*2,x=40+Math.random()*60;s.push({timestamp:o.toISOString(),temperature:60+Math.random()*50,static_pressure:x,max_static_pressure:x+10+Math.random()*30,min_static_pressure:x-10-Math.random()*20,differential_pressure:50+Math.random()*200,volume:5e3+Math.random()*1e4,total_volume_flow:1e4+Math.random()*15e3,battery:l}),a.push({timestamp:o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),voltage:l,color:l>=12.5?"#16a34a":l>=11.8?"#eab308":"#dc2626"})}U(s),Y(a),s.length>0&&X(s[0])},se=t=>t?new Date(t).toLocaleString():"Never",f=(t,s,a=50)=>{if(!h||h.length===0)return[];const i=new Date(t),o=new Date(s),x=h.filter(j=>{const y=new Date(j.timestamp);return y>=i&&y<=o}).slice(0,a);if(x.length===0&&h.length>0){console.warn("[Filter] No data in selected range, showing last 24 hours");const j=new Date,y=new Date(j.getTime()-24*60*60*1e3);return h.filter(Ae=>{const de=new Date(Ae.timestamp);return de>=y&&de<=j}).slice(0,a)}return x},g=({startDate:t,endDate:s,onStartChange:a,onEndChange:i})=>e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date & Time"}),e.jsx("input",{type:"datetime-local",value:t,onChange:o=>a(o.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date & Time"}),e.jsx("input",{type:"datetime-local",value:s,onChange:o=>i(o.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})});if(ue)return e.jsx(K,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading device data..."})]})});if(!p)return e.jsx(K,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ve,{className:"w-16 h-16 mx-auto mb-4 text-red-500"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Device not found"}),e.jsx("button",{onClick:()=>B("/advanced-reports"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Advanced Reports"})]})});const n=ye;return n!=null&&n.battery,!h||h.length===0?[]:h.slice(0,50),e.jsxs(K,{children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"glass rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>B(-1),className:"p-2 hover:bg-gray-200 rounded-lg transition",children:e.jsx(Ue,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:p.device_name||p.client_id}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"w-4 h-4"}),p.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),"Last seen: ",se(p.last_seen)]})]})]})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${p.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:p.is_active?"Online":"Offline"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(u.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Hour Flow Time"}),e.jsx("p",{className:"text-xs text-gray-500",children:"hours"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((ae=n==null?void 0:n.last_hour_flow_time)==null?void 0:ae.toFixed(2))||"0.00"}),e.jsx("span",{className:"text-sm text-gray-500",children:"hrs"})]})]}),e.jsxs(u.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Hour Diff Pressure"}),e.jsx("p",{className:"text-xs text-gray-500",children:"IWC"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-purple-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((re=n==null?void 0:n.last_hour_diff_pressure)==null?void 0:re.toFixed(2))||"0.00"}),e.jsx("span",{className:"text-sm text-gray-500",children:"IWC"})]})]}),e.jsxs(u.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Hour Static Pressure"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PSI"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(pe,{className:"w-6 h-6 text-green-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((ne=n==null?void 0:n.last_hour_static_pressure)==null?void 0:ne.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PSI"})]})]}),e.jsxs(u.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Hour Temperature"}),e.jsx("p",{className:"text-xs text-gray-500",children:"째F"})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(me,{className:"w-6 h-6 text-orange-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((ie=n==null?void 0:n.last_hour_temperature)==null?void 0:ie.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"째F"})]})]}),e.jsxs(u.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Hour Volume"}),e.jsx("p",{className:"text-xs text-gray-500",children:"MCF"})]}),e.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-6 h-6 text-cyan-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((oe=n==null?void 0:n.last_hour_volume)==null?void 0:oe.toFixed(2))||"0.00"}),e.jsx("span",{className:"text-sm text-gray-500",children:"MCF"})]})]}),e.jsxs(u.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Hour Energy"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Energy"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(fe,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((le=n==null?void 0:n.last_hour_energy)==null?void 0:le.toFixed(2))||"0.00"})})]}),e.jsxs(u.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Specific Gravity"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Gravity"})]}),e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"w-6 h-6 text-indigo-600"})})]}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((ce=n==null?void 0:n.specific_gravity)==null?void 0:ce.toFixed(4))||"0.0000"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600"}),"Last Hour Flow Time History"]})}),e.jsx(g,{startDate:_,endDate:T,onStartChange:ke,onEndChange:_e}),e.jsx(w,{width:"100%",height:250,children:e.jsxs(b,{data:f(_,T,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorT18",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),a=new Date(_);return(new Date(T).getTime()-a.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(N,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${(t==null?void 0:t.toFixed(2))||"0.00"} hours`,"Flow Time"]}),e.jsx(k,{type:"monotone",dataKey:"last_hour_flow_time",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorT18)"})]})})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-purple-600"}),"Last Hour Diff Pressure History"]})}),e.jsx(g,{startDate:C,endDate:F,onStartChange:Te,onEndChange:Ce}),e.jsx(w,{width:"100%",height:250,children:e.jsxs(b,{data:f(C,F,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorT19",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#a855f7",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#a855f7",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),a=new Date(C);return(new Date(F).getTime()-a.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(N,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${(t==null?void 0:t.toFixed(2))||"0.00"} IWC`,"Diff Pressure"]}),e.jsx(k,{type:"monotone",dataKey:"last_hour_diff_pressure",stroke:"#a855f7",strokeWidth:2,fill:"url(#colorT19)"})]})})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-green-600"}),"Last Hour Static Pressure History"]})}),e.jsx(g,{startDate:E,endDate:H,onStartChange:Fe,onEndChange:Ee}),e.jsx(w,{width:"100%",height:250,children:e.jsxs(b,{data:f(E,H,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorT110",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),a=new Date(E);return(new Date(H).getTime()-a.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(N,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${(t==null?void 0:t.toFixed(1))||"0.0"} PSI`,"Static Pressure"]}),e.jsx(k,{type:"monotone",dataKey:"last_hour_static_pressure",stroke:"#16a34a",strokeWidth:2,fill:"url(#colorT110)"})]})})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-orange-600"}),"Last Hour Temperature History"]})}),e.jsx(g,{startDate:M,endDate:$,onStartChange:He,onEndChange:Me}),e.jsx(w,{width:"100%",height:250,children:e.jsxs(b,{data:f(M,$,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorT111",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f97316",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#f97316",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),a=new Date(M);return(new Date($).getTime()-a.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(N,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${(t==null?void 0:t.toFixed(1))||"0.0"} 째F`,"Temperature"]}),e.jsx(k,{type:"monotone",dataKey:"last_hour_temperature",stroke:"#f97316",strokeWidth:2,fill:"url(#colorT111)"})]})})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5 text-cyan-600"}),"Last Hour Volume History"]})}),e.jsx(g,{startDate:L,endDate:I,onStartChange:$e,onEndChange:Le}),e.jsx(w,{width:"100%",height:250,children:e.jsxs(b,{data:f(L,I,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorT112",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),a=new Date(L);return(new Date(I).getTime()-a.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(N,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${(t==null?void 0:t.toFixed(2))||"0.00"} MCF`,"Volume"]}),e.jsx(k,{type:"monotone",dataKey:"last_hour_volume",stroke:"#06b6d4",strokeWidth:2,fill:"url(#colorT112)"})]})})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-yellow-600"}),"Last Hour Energy History"]})}),e.jsx(g,{startDate:O,endDate:P,onStartChange:Ie,onEndChange:Oe}),e.jsx(w,{width:"100%",height:250,children:e.jsxs(b,{data:f(O,P,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorT113",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#eab308",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#eab308",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),a=new Date(O);return(new Date(P).getTime()-a.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(N,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${(t==null?void 0:t.toFixed(2))||"0.00"}`,"Energy"]}),e.jsx(k,{type:"monotone",dataKey:"last_hour_energy",stroke:"#eab308",strokeWidth:2,fill:"url(#colorT113)"})]})})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5 text-indigo-600"}),"Specific Gravity History"]})}),e.jsx(g,{startDate:R,endDate:z,onStartChange:Pe,onEndChange:Re}),e.jsx(w,{width:"100%",height:250,children:e.jsxs(b,{data:f(R,z,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorT114",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),a=new Date(R);return(new Date(z).getTime()-a.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(N,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${(t==null?void 0:t.toFixed(4))||"0.0000"}`,"Specific Gravity"]}),e.jsx(k,{type:"monotone",dataKey:"specific_gravity",stroke:"#6366f1",strokeWidth:2,fill:"url(#colorT114)"})]})})]})]}),e.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete History Logs"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"All device readings for selected time range"})]}),e.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Data"})]})]}),e.jsx(g,{startDate:q,endDate:J,onStartChange:ze,onEndChange:Q})]}),e.jsx("div",{className:"overflow-auto",style:{maxHeight:"500px"},children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-300 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Timestamp"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Flow Time (hrs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Diff P (IWC)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Static P (PSI)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Temp (째F)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Volume (MCF)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Energy"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Sp. Gravity"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f(q,J,1e3).map((t,s)=>{var a,i,o,l,x,j,y;return e.jsxs("tr",{className:"hover:bg-gray-100 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s+1})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:se(t.timestamp)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-blue-700",children:((a=t.last_hour_flow_time)==null?void 0:a.toFixed(2))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-purple-700",children:((i=t.last_hour_diff_pressure)==null?void 0:i.toFixed(2))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-green-700",children:((o=t.last_hour_static_pressure)==null?void 0:o.toFixed(1))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-orange-700",children:((l=t.last_hour_temperature)==null?void 0:l.toFixed(1))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-cyan-700",children:((x=t.last_hour_volume)==null?void 0:x.toFixed(2))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-yellow-700",children:((j=t.last_hour_energy)==null?void 0:j.toFixed(2))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-indigo-700",children:((y=t.specific_gravity)==null?void 0:y.toFixed(4))||"-"})})]},s)})})]})})]})]}),e.jsx(Be,{isOpen:Ge,onClose:()=>Z(!1),deviceId:m,deviceName:p==null?void 0:p.device_name,exportType:"device"})]})};export{Pt as default};
