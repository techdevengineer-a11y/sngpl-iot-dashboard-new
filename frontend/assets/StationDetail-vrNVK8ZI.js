import{b as Ge,a as Re,r as i,j as e}from"./index-CuPLTIq6.js";import{L as B}from"./Layout-Bhj-hCGg.js";import{E as ze}from"./ExportModal-BX3XtV_d.js";import{A as K}from"./alert-triangle-CENt64Gl.js";import{m as x}from"./motion-8SLn2u6e.js";import{A as Ae}from"./arrow-left-DI3Uksat.js";import{M as Be}from"./map-pin-DeCLRHw5.js";import{C as Ke}from"./clock-CARLuty7.js";import{T as De,W as Se}from"./wind-BnPc78kP.js";import{G as ke}from"./gauge-C3G_6xek.js";import{T as F}from"./trending-up-KnywOmps.js";import{D as _e}from"./droplets-DPI-7e7N.js";import{B as Ce}from"./battery-wNEowIjo.js";import{R as y,A as M,C as N,X as b,Y as w,T as v,a as $}from"./AreaChart-DqSnVAAS.js";import{L as Ue,a as U}from"./LineChart-GUh-rr9v.js";import{B as Ye,a as Xe,C as qe}from"./BarChart-D74YUTXE.js";import{D as Je}from"./download-BIeXtM7T.js";import"./x-BHP2hNWw.js";import"./createLucideIcon-Bp_Bh7vc.js";import"./calendar-BHWY2O9g.js";import"./file-spreadsheet-BNFMNFvj.js";import"./database-Cj7RBCxv.js";import"./string-9MY7XALd.js";const Y=n=>n<0?{bg:"bg-red-100",text:"text-red-600",status:"V.Low",color:"#dc2626"}:n<10?{bg:"bg-red-200",text:"text-red-700",status:"Low",color:"#f87171"}:n<=120?{bg:"bg-green-100",text:"text-green-600",status:"Normal",color:"#16a34a"}:{bg:"bg-yellow-100",text:"text-yellow-600",status:"High",color:"#eab308"},m=n=>n<10?{bg:"bg-yellow-100",text:"text-yellow-600",status:"V.Low",color:"#eab308"}:n<=90?{bg:"bg-green-100",text:"text-green-600",status:"Normal",color:"#16a34a"}:n<=120?{bg:"bg-red-200",text:"text-red-700",status:"High",color:"#f87171"}:{bg:"bg-red-100",text:"text-red-600",status:"V.High",color:"#dc2626"},X=n=>n<0?{bg:"bg-yellow-100",text:"text-yellow-600",status:"V.Low",color:"#eab308"}:n<=300?{bg:"bg-green-100",text:"text-green-600",status:"Normal",color:"#16a34a"}:n<=400?{bg:"bg-red-200",text:"text-red-700",status:"High",color:"#f87171"}:{bg:"bg-red-100",text:"text-red-600",status:"V.High",color:"#dc2626"},q=n=>n<10?{bg:"bg-red-100",text:"text-red-600",status:"V.Low",color:"#dc2626"}:n<10.5?{bg:"bg-red-200",text:"text-red-700",status:"Low",color:"#f87171"}:n<=14?{bg:"bg-green-100",text:"text-green-600",status:"Normal",color:"#16a34a"}:{bg:"bg-yellow-100",text:"text-yellow-600",status:"High",color:"#eab308"},Dt=()=>{var fe,ue,je,ye,Ne,be,we;const{stationId:n}=Ge(),J=Re(),[d,Q]=i.useState(null),[Fe,Me]=i.useState(!0),[p,Z]=i.useState([]),[$e,ee]=i.useState(null),[Qe,te]=i.useState([]),f=()=>{const t=new Date;return t.setHours(t.getHours()-24),t.toISOString().slice(0,16)},u=()=>new Date().toISOString().slice(0,16),[H,He]=i.useState(f()),[L,se]=i.useState(u()),[T,Le]=i.useState(f()),[I,ae]=i.useState(u()),[P,Te]=i.useState(f()),[V,re]=i.useState(u()),[E,Ie]=i.useState(f()),[O,ne]=i.useState(u()),[W,Pe]=i.useState(f()),[G,ie]=i.useState(u()),[D,Ve]=i.useState(f()),[S,le]=i.useState(u()),[ce,Ee]=i.useState(f()),[oe,de]=i.useState(u()),[Oe,xe]=i.useState(!1);i.useEffect(()=>{me(),pe();const t=setInterval(()=>{me(),pe()},2e3),s=setInterval(()=>{const r=new Date().toISOString().slice(0,16);se(r),ae(r),re(r),ne(r),ie(r),le(r),de(r)},5e3);return()=>{clearInterval(t),clearInterval(s)}},[n]);const me=async()=>{try{const t=await fetch("/api/devices/");if(t.ok){const r=(await t.json()).find(l=>l.id===parseInt(n||"0"));r?Q(r):R()}else R()}catch(t){console.error("Error fetching device data:",t),R()}finally{Me(!1)}},pe=async()=>{try{const t=await fetch(`/api/analytics/readings?device_id=${n}&page_size=1000&page=1`);if(t.ok){const r=(await t.json()).data||[];if(console.log(`[StationDetail] Fetched ${r.length} readings for device ${n}`),r&&r.length>0){const l=r.sort((o,g)=>new Date(g.timestamp).getTime()-new Date(o.timestamp).getTime());Z(l),ee(l[0]),console.log("[StationDetail] Latest reading:",l[0]);const c=l.map(o=>({timestamp:new Date(o.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),voltage:o.battery||12.5,color:(o.battery||12.5)>=12.5?"#16a34a":(o.battery||12.5)>=11.8?"#eab308":"#dc2626"}));te(c)}else console.log("[StationDetail] No readings found, generating mock data"),z()}else console.error("[StationDetail] API failed with status:",t.status),z()}catch(t){console.error("Error fetching historical data:",t),z()}},R=()=>{const t={id:parseInt(n||"1"),client_id:`SMS-${n}`,device_name:`Station ${n}`,location:`Section ${Math.ceil(parseInt(n||"1")/80)} - Location ${n}`,is_active:Math.random()>.2,last_seen:new Date(Date.now()-Math.random()*36e5).toISOString(),latest_reading:{timestamp:new Date().toISOString(),temperature:60+Math.random()*50,static_pressure:40+Math.random()*60,max_static_pressure:50+Math.random()*80,min_static_pressure:30+Math.random()*40,differential_pressure:50+Math.random()*200,volume:5e3+Math.random()*1e4,total_volume_flow:1e4+Math.random()*15e3,battery:11.5+Math.random()*2}};Q(t)},z=()=>{const t=new Date,s=[],r=[];for(let l=167;l>=0;l--){const c=new Date(t.getTime()-l*60*60*1e3),o=11.5+Math.random()*2,g=40+Math.random()*60;s.push({timestamp:c.toISOString(),temperature:60+Math.random()*50,static_pressure:g,max_static_pressure:g+10+Math.random()*30,min_static_pressure:g-10-Math.random()*20,differential_pressure:50+Math.random()*200,volume:5e3+Math.random()*1e4,total_volume_flow:1e4+Math.random()*15e3,battery:o}),r.push({timestamp:c.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),voltage:o,color:o>=12.5?"#16a34a":o>=11.8?"#eab308":"#dc2626"})}Z(s),te(r),s.length>0&&ee(s[0])},he=t=>t?new Date(t).toLocaleString():"Never",ge=t=>Math.random()>.7,k=(t,s)=>{switch(s){case"temperature":return t>100||t<20?"#dc2626":t>90||t<30?"#eab308":"#16a34a";case"static_pressure":return t<30||t>120?"#dc2626":t<40||t>110?"#eab308":"#16a34a";case"differential_pressure":return t>300?"#dc2626":t>250?"#eab308":"#16a34a";case"volume":return t<3e3?"#dc2626":t<4e3?"#eab308":"#16a34a";case"flow":return t<5e3?"#dc2626":t<8e3?"#eab308":"#16a34a";default:return"#16a34a"}},h=(t,s,r=50)=>{if(!p||p.length===0)return[];const l=new Date(t),c=new Date(s),g=p.filter(_=>{const C=new Date(_.timestamp);return C>=l&&C<=c}).slice(0,r);if(g.length===0&&p.length>0){console.warn("[Filter] No data in selected range, showing last 24 hours");const _=new Date,C=new Date(_.getTime()-24*60*60*1e3);return p.filter(We=>{const ve=new Date(We.timestamp);return ve>=C&&ve<=_}).slice(0,r)}return g},j=({startDate:t,endDate:s,onStartChange:r,onEndChange:l})=>e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date & Time"}),e.jsx("input",{type:"datetime-local",value:t,onChange:c=>r(c.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date & Time"}),e.jsx("input",{type:"datetime-local",value:s,onChange:c=>l(c.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})});if(Fe)return e.jsx(B,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading device data..."})]})});if(!d)return e.jsx(B,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-16 h-16 mx-auto mb-4 text-red-500"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Device not found"}),e.jsx("button",{onClick:()=>J("/sections"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Sections"})]})});const a=$e,A=(a==null?void 0:a.battery)||12.5;return!p||p.length===0?[]:p.slice(0,50),e.jsxs(B,{children:[e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"glass rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>J(-1),className:"p-2 hover:bg-gray-200 rounded-lg transition",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:d.device_name||d.client_id}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-4 h-4"}),d.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Last seen: ",he(d.last_seen)]})]})]})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${d.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d.is_active?"Online":"Offline"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Temperature"}),e.jsx("p",{className:"text-xs text-gray-500",children:"°F"})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"w-6 h-6 text-orange-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((fe=a==null?void 0:a.temperature)==null?void 0:fe.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"°F"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`text-xs font-medium ${Y((a==null?void 0:a.temperature)||0).text}`,children:Y((a==null?void 0:a.temperature)||0).status})})]}),e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Static Pressure"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PSI"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ke,{className:"w-6 h-6 text-green-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((ue=a==null?void 0:a.static_pressure)==null?void 0:ue.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PSI"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`text-xs font-medium ${m((a==null?void 0:a.static_pressure)||0).text}`,children:m((a==null?void 0:a.static_pressure)||0).status})})]}),e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Max Static Pressure"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PSI"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(F,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((je=a==null?void 0:a.max_static_pressure)==null?void 0:je.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PSI"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`text-xs font-medium ${m((a==null?void 0:a.max_static_pressure)||0).text}`,children:m((a==null?void 0:a.max_static_pressure)||0).status})})]}),e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Min Static Pressure"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PSI"})]}),e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(F,{className:"w-6 h-6 text-indigo-600 transform rotate-180"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((ye=a==null?void 0:a.min_static_pressure)==null?void 0:ye.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PSI"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`text-xs font-medium ${m((a==null?void 0:a.min_static_pressure)||0).text}`,children:m((a==null?void 0:a.min_static_pressure)||0).status})})]}),e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Differential Pressure"}),e.jsx("p",{className:"text-xs text-gray-500",children:"IWC"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((Ne=a==null?void 0:a.differential_pressure)==null?void 0:Ne.toFixed(2))||"0.00"}),e.jsx("span",{className:"text-sm text-gray-500",children:"IWC"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`text-xs font-medium ${X((a==null?void 0:a.differential_pressure)||0).text}`,children:X((a==null?void 0:a.differential_pressure)||0).status})})]}),e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Volume"}),e.jsx("p",{className:"text-xs text-gray-500",children:"MCF"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(_e,{className:"w-6 h-6 text-purple-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((be=a==null?void 0:a.volume)==null?void 0:be.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"MCF"})]}),ge()&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-yellow-700 bg-yellow-100 px-3 py-1 rounded-lg",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Volume Alert"})]})]}),e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Volume Flow"}),e.jsx("p",{className:"text-xs text-gray-500",children:"MCF/day"})]}),e.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center",children:e.jsx(F,{className:"w-6 h-6 text-cyan-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:((we=a==null?void 0:a.total_volume_flow)==null?void 0:we.toFixed(1))||"0.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"MCF/day"})]}),ge()&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-yellow-700 bg-yellow-100 px-3 py-1 rounded-lg",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Flow Alert"})]})]}),e.jsxs(x.div,{whileHover:{scale:1.02},className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Battery"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Volts"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(Ce,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:A.toFixed(2)}),e.jsx("span",{className:"text-sm text-gray-500",children:"V"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`text-xs font-medium ${q(A).text}`,children:q(A).status})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-orange-600"}),"Temperature History"]})}),e.jsx(j,{startDate:H,endDate:L,onStartChange:He,onEndChange:se}),e.jsx(y,{width:"100%",height:250,children:e.jsxs(M,{data:h(H,L,50),children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorTempGreen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorTempYellow",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#eab308",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#eab308",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorTempRed",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#dc2626",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#dc2626",stopOpacity:0})]})]}),e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t),r=new Date(H);return(new Date(L).getTime()-r.getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(w,{stroke:"#9ca3af",style:{fontSize:"12px"},domain:[-10,150]}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>{const s=k(t,"temperature"),r=s==="#16a34a"?"Normal":s==="#eab308"?"Warning":"Danger";return[`${t.toFixed(1)}°F (${r})`,"Temperature"]}}),e.jsx($,{type:"monotone",dataKey:"temperature",stroke:"#16a34a",strokeWidth:2,fill:"url(#colorTempGreen)"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"V.Low (<0°F)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Low (0-10°F)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Normal (10-120°F)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"High (>120°F)"})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5 text-green-600"}),"Pressure History (Static / Max / Min)"]})}),e.jsx(j,{startDate:T,endDate:I,onStartChange:Le,onEndChange:ae}),e.jsx(y,{width:"100%",height:250,children:e.jsxs(Ue,{data:h(T,I,50),children:[e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return(new Date(I).getTime()-new Date(T).getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours()}:00`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(w,{stroke:"#9ca3af",style:{fontSize:"12px"},domain:[0,150]}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString()}),e.jsx(U,{type:"monotone",dataKey:"static_pressure",name:"Static",stroke:"#16a34a",strokeWidth:2,dot:!1}),e.jsx(U,{type:"monotone",dataKey:"max_static_pressure",name:"Max",stroke:"#3b82f6",strokeWidth:2,dot:!1}),e.jsx(U,{type:"monotone",dataKey:"min_static_pressure",name:"Min",stroke:"#6366f1",strokeWidth:2,dot:!1})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"V.Low (<10 PSI)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Normal (10-90 PSI)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"High (90-120 PSI)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"V.High (>130 PSI)"})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-blue-600"}),"Differential Pressure History"]})}),e.jsx(j,{startDate:P,endDate:V,onStartChange:Te,onEndChange:re}),e.jsx(y,{width:"100%",height:250,children:e.jsxs(M,{data:h(P,V,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorDiffPGreen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:0})]})}),e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return(new Date(V).getTime()-new Date(P).getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours()}:00`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(w,{stroke:"#9ca3af",style:{fontSize:"12px"},domain:[0,500]}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>{const s=k(t,"differential_pressure"),r=s==="#16a34a"?"Normal":s==="#eab308"?"Warning":"Danger";return[`${t.toFixed(2)} IWC (${r})`,"Differential Pressure"]}}),e.jsx($,{type:"monotone",dataKey:"differential_pressure",stroke:"#16a34a",strokeWidth:2,fill:"url(#colorDiffPGreen)"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"V.Low (<0 IWC)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Normal (0-300 IWC)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"High (300-400 IWC)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"V.High (>400 IWC)"})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5 text-purple-600"}),"Volume History"]})}),e.jsx(j,{startDate:E,endDate:O,onStartChange:Ie,onEndChange:ne}),e.jsx(y,{width:"100%",height:250,children:e.jsxs(M,{data:h(E,O,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorVolumeGreen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:0})]})}),e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return(new Date(O).getTime()-new Date(E).getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours()}:00`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(w,{stroke:"#9ca3af",style:{fontSize:"12px"},domain:[0,25e3]}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>{const s=k(t,"volume"),r=s==="#16a34a"?"Normal":s==="#eab308"?"Warning":"Danger";return[`${t.toFixed(1)} MCF (${r})`,"Volume"]}}),e.jsx($,{type:"monotone",dataKey:"volume",stroke:"#16a34a",strokeWidth:2,fill:"url(#colorVolumeGreen)"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Normal (>4000 MCF)"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Warning (3000-4000)"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Danger (<3000)"})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6 lg:col-span-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-cyan-600"}),"Total Volume Flow History"]})}),e.jsx(j,{startDate:W,endDate:G,onStartChange:Pe,onEndChange:ie}),e.jsx(y,{width:"100%",height:250,children:e.jsxs(M,{data:h(W,G,50),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorFlowGreen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:0})]})}),e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return(new Date(G).getTime()-new Date(W).getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours()}:00`},stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(w,{stroke:"#9ca3af",style:{fontSize:"12px"},domain:[0,4e4]}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>{const s=k(t,"flow"),r=s==="#16a34a"?"Normal":s==="#eab308"?"Warning":"Danger";return[`${t.toFixed(1)} MCF/day (${r})`,"Flow"]}}),e.jsx($,{type:"monotone",dataKey:"total_volume_flow",stroke:"#16a34a",strokeWidth:2,fill:"url(#colorFlowGreen)"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Normal (>8000 MCF/day)"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Warning (5000-8000)"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Danger (<5000)"})]})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-yellow-600"}),"Battery Voltage History"]})}),e.jsx(j,{startDate:D,endDate:S,onStartChange:Ve,onEndChange:le}),e.jsx(y,{width:"100%",height:300,children:e.jsxs(Ye,{data:h(D,S,50),layout:"horizontal",children:[e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{type:"category",dataKey:"timestamp",stroke:"#9ca3af",style:{fontSize:"12px"},tickFormatter:t=>{const s=new Date(t);return(new Date(S).getTime()-new Date(D).getTime())/(1e3*60*60*24)>2?`${s.getMonth()+1}/${s.getDate()}`:`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`}}),e.jsx(w,{type:"number",stroke:"#9ca3af",style:{fontSize:"12px"},domain:[10,15]}),e.jsx(v,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>{const s=t>=12.5?"Good":t>=11.8?"Medium":"Low";return[`${(t==null?void 0:t.toFixed(2))||"0"}V (${s})`,"Battery"]}}),e.jsx(Xe,{dataKey:"battery",radius:[4,4,0,0],children:h(D,S,50).map((t,s)=>{const r=t.battery||12.5,l=r>=12.5?"#16a34a":r>=11.8?"#eab308":"#dc2626";return e.jsx(qe,{fill:l},`cell-${s}`)})})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"V.Low (<10V)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-400 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Low (10-10.5V)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Normal (10.5-14V)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"High (>14V)"})]})]})]}),e.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete History Logs"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"All device readings for selected time range"})]}),e.jsxs("button",{onClick:()=>xe(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Data"})]})]}),e.jsx(j,{startDate:ce,endDate:oe,onStartChange:Ee,onEndChange:de})]}),e.jsx("div",{className:"overflow-auto",style:{maxHeight:"500px"},children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-300 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Timestamp"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Temperature (°F)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Static P (PSI)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Max P (PSI)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Min P (PSI)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Diff P (IWC)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Volume (MCF)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Flow (MCF/day)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Battery (V)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h(ce,oe,1e3).map((t,s)=>{var r,l,c;return e.jsxs("tr",{className:"hover:bg-gray-100 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s+1})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:he(t.timestamp)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${Y(t.temperature).text}`,children:t.temperature.toFixed(1)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${m(t.static_pressure).text}`,children:t.static_pressure.toFixed(1)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${m(t.max_static_pressure||0).text}`,children:((r=t.max_static_pressure)==null?void 0:r.toFixed(1))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${m(t.min_static_pressure||0).text}`,children:((l=t.min_static_pressure)==null?void 0:l.toFixed(1))||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${X(t.differential_pressure).text}`,children:t.differential_pressure.toFixed(2)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:t.volume.toFixed(1)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-cyan-700",children:t.total_volume_flow.toFixed(1)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("span",{className:`text-sm font-medium ${q(t.battery||0).text}`,children:[((c=t.battery)==null?void 0:c.toFixed(2))||"-","V"]})})]},s)})})]})})]})]}),e.jsx(ze,{isOpen:Oe,onClose:()=>xe(!1),deviceId:n,deviceName:d==null?void 0:d.device_name,exportType:"device"})]})};export{Dt as default};
