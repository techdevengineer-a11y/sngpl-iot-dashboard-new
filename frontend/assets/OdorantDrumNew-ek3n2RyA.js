import{r as s,j as e,z as w}from"./index-CuPLTIq6.js";import{L as be}from"./Layout-Bhj-hCGg.js";import{c as W}from"./createLucideIcon-Bp_Bh7vc.js";import{A as je}from"./activity-DvS__W_y.js";import{u as de,f as ye,a as Ne,P as ve,L as we,m as A}from"./motion-8SLn2u6e.js";import{X}from"./x-BHP2hNWw.js";import{P as ie}from"./plus-D2CmEM8T.js";import{A as Ce}from"./alert-circle-Dx3ewC63.js";import{C as _e}from"./calendar-BHWY2O9g.js";import{U as ke}from"./user-CadCTWL6.js";function me(){const n=s.useRef(!1);return de(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function Re(){const n=me(),[o,r]=s.useState(0),a=s.useCallback(()=>{n.current&&r(o+1)},[o]);return[s.useCallback(()=>ye.postRender(a),[a]),o]}class Se extends s.Component{getSnapshotBeforeUpdate(o){const r=this.props.childRef.current;if(r&&o.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Me({children:n,isPresent:o}){const r=s.useId(),a=s.useRef(null),l=s.useRef({width:0,height:0,top:0,left:0});return s.useInsertionEffect(()=>{const{width:p,height:b,top:x,left:C}=l.current;if(o||!a.current||!p||!b)return;a.current.dataset.motionPopId=r;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${b}px !important;
            top: ${x}px !important;
            left: ${C}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[o]),s.createElement(Se,{isPresent:o,childRef:a,sizeRef:l},s.cloneElement(n,{ref:a}))}const G=({children:n,initial:o,isPresent:r,onExitComplete:a,custom:l,presenceAffectsLayout:p,mode:b})=>{const x=Ne(De),C=s.useId(),f=s.useMemo(()=>({id:C,initial:o,isPresent:r,custom:l,onExitComplete:c=>{x.set(c,!0);for(const d of x.values())if(!d)return;a&&a()},register:c=>(x.set(c,!1),()=>x.delete(c))}),p?void 0:[r]);return s.useMemo(()=>{x.forEach((c,d)=>x.set(d,!1))},[r]),s.useEffect(()=>{!r&&!x.size&&a&&a()},[r]),b==="popLayout"&&(n=s.createElement(Me,{isPresent:r},n)),s.createElement(ve.Provider,{value:f},n)};function De(){return new Map}function Fe(n){return s.useEffect(()=>()=>n(),[])}const D=n=>n.key||"";function Ee(n,o){n.forEach(r=>{const a=D(r);o.set(a,r)})}function Le(n){const o=[];return s.Children.forEach(n,r=>{s.isValidElement(r)&&o.push(r)}),o}const V=({children:n,custom:o,initial:r=!0,onExitComplete:a,exitBeforeEnter:l,presenceAffectsLayout:p=!0,mode:b="sync"})=>{const x=s.useContext(we).forceRender||Re()[0],C=me(),f=Le(n);let c=f;const d=s.useRef(new Map).current,_=s.useRef(c),y=s.useRef(new Map).current,F=s.useRef(!0);if(de(()=>{F.current=!1,Ee(f,y),_.current=c}),Fe(()=>{F.current=!0,y.clear(),d.clear()}),F.current)return s.createElement(s.Fragment,null,c.map(i=>s.createElement(G,{key:D(i),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:p,mode:b},i)));c=[...c];const R=_.current.map(D),L=f.map(D),z=R.length;for(let i=0;i<z;i++){const u=R[i];L.indexOf(u)===-1&&!d.has(u)&&d.set(u,void 0)}return b==="wait"&&d.size&&(c=[]),d.forEach((i,u)=>{if(L.indexOf(u)!==-1)return;const I=y.get(u);if(!I)return;const K=R.indexOf(u);let E=i;if(!E){const $=()=>{d.delete(u);const P=Array.from(y.keys()).filter(S=>!L.includes(S));if(P.forEach(S=>y.delete(S)),_.current=f.filter(S=>{const O=D(S);return O===u||P.includes(O)}),!d.size){if(C.current===!1)return;x(),a&&a()}};E=s.createElement(G,{key:D(I),isPresent:!1,onExitComplete:$,custom:o,presenceAffectsLayout:p,mode:b},I),d.set(u,E)}c.splice(K,0,E)}),c=c.map(i=>{const u=i.key;return d.has(u)?i:s.createElement(G,{key:D(i),isPresent:!0,presenceAffectsLayout:p,mode:b},i)}),s.createElement(s.Fragment,null,d.size?c:c.map(i=>s.cloneElement(i)))};/**
 * @license lucide-react v0.307.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=W("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.307.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=W("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.307.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=W("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.307.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=W("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ke=()=>{var Q,Y,Z,ee,te,se;const[n,o]=s.useState([]),[r,a]=s.useState(null),[l,p]=s.useState(null),[b,x]=s.useState(!1),[C,f]=s.useState([]),[c,d]=s.useState(!1),[_,y]=s.useState(""),[F,R]=s.useState(""),[L,z]=s.useState(!1);s.useEffect(()=>{i();const t=setInterval(i,1e4);return()=>clearInterval(t)},[]);const i=async()=>{try{const t=localStorage.getItem("token"),m=await fetch("/api/sections/stats",{headers:{Authorization:`Bearer ${t}`}});if(!m.ok)return;const N=(await m.json()).sections||[],M=await fetch("/api/odorant/drums",{headers:{Authorization:`Bearer ${t}`}}),T=M.ok?await M.json():[],H=await fetch("/api/devices/",{headers:{Authorization:`Bearer ${t}`}}),re=H.ok?await H.json():[];console.log("[ODORANT DRUM] Loaded devices:",re.length);const xe=re.map(k=>({...k,latest_reading:null})),ue=k=>{if(!k)return null;const v=k.match(/SMS-([IVX]+)-/);return v?v[1]:null},he=N.map(k=>{const v=xe.filter(g=>{const j=ue(g.client_id);return k.section_id==="OTHER"?!j||!["I","II","III","IV","V"].includes(j):j===k.section_id}).map(g=>{var ae,ne;const j=T.find(B=>B.device_id===g.id),U=((ae=g.latest_reading)==null?void 0:ae.volume)||0,q=U/1e3;console.log(`[ODORANT DRUM] Device ${g.client_id}:`,{latestVolumeMCF:(ne=g.latest_reading)==null?void 0:ne.volume,calculatedMCF:U,calculatedMMCF:q});const J=q*.5;let le=j;if(j&&J>0){const B=Math.max(0,(j.current_level||j.initial_level)-J),pe=j.initial_level>0?Math.round(B/j.initial_level*100):0;le={...j,current_level:B,percentage_remaining:pe}}return{...g,drum:le,cumulative_volume_flow:U,mmcf:q,odorant_consumed:J}}),fe=v.filter(g=>!g.is_active).length,ge=Math.floor(Math.random()*v.length*.2);return{...k,devices:v,totalDevices:v.length,activeDevices:v.filter(g=>g.is_active).length,offlineDevices:fe,devicesWithAlarms:ge,drumsConfigured:v.filter(g=>g.drum).length}});o(he)}catch(t){console.error("Error fetching sections:",t)}},u=async t=>{z(!0);try{const m=localStorage.getItem("token"),h=await fetch(`/api/odorant/drums/${t}/history`,{headers:{Authorization:`Bearer ${m}`}});if(h.ok){const N=await h.json();f(N),x(!0)}}catch{w.error("Failed to load history")}finally{z(!1)}},I=async()=>{if(!_||parseFloat(_)<=0){w.error("Please enter a valid refill amount");return}if(l!=null&&l.drum)try{const t=localStorage.getItem("token"),m=await fetch("/api/odorant/drums/refill",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({drum_id:l.drum.id,refilled_amount:parseFloat(_),notes:F||null})});if(m.ok)w.success("Drum refilled successfully!"),d(!1),y(""),R(""),p(null),i();else{const h=await m.json();w.error(h.detail||"Failed to refill drum")}}catch{w.error("Error refilling drum")}},K=async(t,m)=>{try{const h=localStorage.getItem("token"),N=await fetch("/api/odorant/drums",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({device_id:t.id,section_id:m,station_name:t.client_id||`Station ${t.id}`,initial_level:5e3,odorant_consumption_rate:.5})});if(N.ok)w.success("Odorant drum added successfully!"),i();else{const M=await N.json();w.error(M.detail||"Failed to add drum")}}catch{w.error("Error adding drum")}},E=t=>{a(t)},$=["from-blue-600 to-blue-700","from-green-600 to-green-700","from-purple-600 to-purple-700","from-orange-600 to-orange-700","from-pink-600 to-pink-700"],P=t=>{if(!t.drum){w.error('No odorant drum configured for this device. Click "Add Drum" to configure.');return}p(t)},S=t=>t?t>50?"bg-green-500":t>20?"bg-yellow-500":"bg-red-500":"bg-gray-300",O=t=>t?t>50?"text-green-600":t>20?"text-yellow-600":"text-red-600":"text-gray-500";return e.jsx(be,{children:e.jsxs("div",{className:"p-6 min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-10 h-10 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Odorant Drum Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time MMCF tracking & Odorant levels for all devices"})]})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx(ce,{className:"w-5 h-5"}),"Refresh"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((t,m)=>{var h;return e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{onClick:()=>E(t),className:"glass rounded-xl p-6 cursor-pointer hover:scale-105 transition-all duration-300 hover:shadow-2xl hover:shadow-blue-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${$[m%$.length]} rounded-xl flex items-center justify-center text-white shadow-lg`,children:e.jsx("span",{className:"text-2xl font-bold",children:t.section_id})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Flow"}),e.jsx("div",{className:"text-3xl font-bold text-cyan-600",children:((h=t.cumulative_volume_flow)==null?void 0:h.toFixed(1))||"0"}),e.jsx("div",{className:"text-xs text-gray-600",children:t.unit||"MCF/day"})]})]}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:t.section_name}),e.jsxs("div",{className:"bg-green-100 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"w-5 h-5 text-green-600"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Devices"})]}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:t.totalDevices||0})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-300",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"View Devices"}),e.jsx(Ie,{className:"w-5 h-5 text-gray-600"})]})]})},t.section_id)})}),e.jsx(V,{children:r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-6 z-50 overflow-y-auto",children:e.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-6xl my-8 shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:r.section_name}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Section ",r.section_id," • ",((Q=r.devices)==null?void 0:Q.length)||0," Devices • ",r.activeDevices||0," Online"]})]}),e.jsx("button",{onClick:()=>a(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(X,{className:"w-7 h-7"})})]}),!r.devices||r.devices.length===0?e.jsx("p",{className:"text-gray-500 text-center py-16 text-lg",children:"No devices found in this section"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Device ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"MCF"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"MMCF"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Drum Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:r.devices.map((t,m)=>{var h,N,M,T;return e.jsxs("tr",{className:`${m%2===0?"bg-white":"bg-gray-50"} hover:bg-blue-50 transition-colors border-b border-gray-200`,children:[e.jsx("td",{className:"px-4 py-3",children:t.is_active?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-lg"}),e.jsx("span",{className:"text-sm text-green-600 font-semibold",children:"Online"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Offline"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm font-bold text-gray-900",children:t.client_id})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-700",children:t.device_name||"N/A"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-600",children:t.location||"No location"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"text-sm font-bold text-blue-900",children:((h=t.cumulative_volume_flow)==null?void 0:h.toFixed(2))||"0.00"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"text-sm font-bold text-purple-900",children:((N=t.mmcf)==null?void 0:N.toFixed(3))||"0.000"})}),e.jsx("td",{className:"px-4 py-3",children:t.drum?e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:`text-sm font-bold ${O(t.drum.percentage_remaining)}`,children:[t.drum.percentage_remaining,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${S(t.drum.percentage_remaining)}`,style:{width:`${t.drum.percentage_remaining}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[((M=t.drum.current_level)==null?void 0:M.toFixed(1))||"0","L / ",((T=t.drum.initial_level)==null?void 0:T.toFixed(0))||"0","L"]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No Drum"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:t.drum?e.jsx("button",{onClick:()=>P(t),className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"View Details"}):e.jsxs("button",{onClick:H=>{H.stopPropagation(),K(t,r.section_id)},className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-semibold flex items-center gap-1 mx-auto",children:[e.jsx(ie,{className:"w-4 h-4"}),"Add Drum"]})})]},t.id)})})]})})]})})}),e.jsx(V,{children:l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-6 z-50 overflow-y-auto",children:e.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-4xl my-8 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-4xl font-bold text-gray-900",children:l.client_id}),e.jsx("p",{className:"text-gray-600 mt-1 text-lg",children:(Y=l.drum)==null?void 0:Y.station_name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.location})]}),e.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(X,{className:"w-7 h-7"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"relative w-72 h-96 bg-gradient-to-b from-gray-300 to-gray-400 rounded-3xl shadow-2xl overflow-hidden border-4 border-gray-500",children:[e.jsx(A.div,{className:"absolute bottom-0 w-full",style:{backgroundColor:l.drum.percentage_remaining>50?"#10b981":l.drum.percentage_remaining>20?"#f59e0b":"#ef4444"},animate:{height:`${l.drum.percentage_remaining}%`},transition:{duration:1,ease:"easeOut"},children:e.jsx("div",{className:"absolute top-0 w-full h-6 bg-white/20 animate-pulse"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white/95 px-10 py-8 rounded-2xl backdrop-blur-sm shadow-xl",children:[e.jsxs("p",{className:`text-7xl font-bold ${O(l.drum.percentage_remaining)}`,children:[l.drum.percentage_remaining,"%"]}),e.jsx("p",{className:"text-base text-gray-600 mt-3 font-semibold",children:"Remaining"})]})})]})}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>d(!0),className:"flex-1 flex items-center justify-center gap-2 px-5 py-4 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors shadow-lg text-lg font-semibold",children:[e.jsx(ie,{className:"w-6 h-6"}),"Refill Drum"]}),e.jsxs("button",{onClick:()=>u(l.drum.id),className:"flex-1 flex items-center justify-center gap-2 px-5 py-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors shadow-lg text-lg font-semibold",children:[e.jsx(oe,{className:"w-6 h-6"}),"View History"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:"Current Level"}),e.jsxs("p",{className:"text-4xl font-bold text-blue-900",children:[(Z=l.drum.current_level)==null?void 0:Z.toFixed(1),"L"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:"Capacity"}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:[(ee=l.drum.initial_level)==null?void 0:ee.toFixed(0),"L"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-5 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:"Used"}),e.jsxs("p",{className:"text-4xl font-bold text-red-900",children:[(te=l.drum.odorant_used)==null?void 0:te.toFixed(1),"L"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:"MMCF"}),e.jsx("p",{className:"text-4xl font-bold text-green-900",children:(se=l.drum.total_mmcf_consumed)==null?void 0:se.toFixed(2)})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Consumption Rate"}),e.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[l.drum.odorant_consumption_rate," L/MMCF"]})]})}),l.drum.percentage_remaining<20&&e.jsx("div",{className:"bg-red-50 border-2 border-red-500 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{className:"w-7 h-7 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-red-900 text-lg",children:"Critical Level Warning!"}),e.jsx("p",{className:"text-sm text-red-700",children:"Immediate refilling required"})]})]})})]})]})]})})}),e.jsx(V,{children:c&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-6 z-50",children:e.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-3xl font-bold mb-6",children:"Refill Odorant Drum"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["Refill Amount (Liters) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:_,onChange:t=>y(t.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg",placeholder:"Enter amount",min:"0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:F,onChange:t=>R(t.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Add notes about this refill",rows:"3"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("button",{onClick:()=>{d(!1),y(""),R("")},className:"flex-1 px-5 py-3 border-2 border-gray-300 rounded-xl hover:bg-gray-50 transition-colors font-bold text-lg",children:"Cancel"}),e.jsx("button",{onClick:I,className:"flex-1 px-5 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors font-bold shadow-lg text-lg",children:"Confirm Refill"})]})]})})}),e.jsx(V,{children:b&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-6 overflow-y-auto z-50",children:e.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-4xl my-8 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Refill History"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(X,{className:"w-7 h-7"})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:L?e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-3 animate-spin"}),e.jsx("p",{className:"text-lg",children:"Loading history..."})]}):C.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(oe,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-xl",children:"No refill history available"})]}):C.map(t=>{var m;return e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-6 border-2 border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-base",children:new Date(t.refill_date).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:t.refilled_by_username||"Unknown"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white p-4 rounded-xl shadow-sm",children:[e.jsxs("span",{className:"font-bold text-gray-700 text-lg",children:[((m=t.previous_level)==null?void 0:m.toFixed(1))||"0","L"]}),e.jsx("span",{className:"text-gray-400 text-xl",children:"→"}),e.jsxs("span",{className:"font-bold text-green-600 text-2xl",children:["+",t.refilled_amount.toFixed(1),"L"]}),e.jsx("span",{className:"text-gray-400 text-xl",children:"→"}),e.jsxs("span",{className:"font-bold text-blue-700 text-lg",children:[t.new_level.toFixed(1),"L"]})]}),t.notes&&e.jsxs("div",{className:"mt-4 text-sm text-gray-700 bg-blue-50 p-4 rounded-lg italic border-l-4 border-blue-400",children:['"',t.notes,'"']})]},t.id)})})]})})})]})})};export{Ke as default};
