import{u as me,r as n,o as ue,p as ge,q as F,z as r,j as e,s as he,v as T,w as pe,x as fe,y as be}from"./index-CuPLTIq6.js";import{L as O}from"./Layout-Bhj-hCGg.js";import{S as ye}from"./settings-JHGs2bLF.js";import{c as R}from"./createLucideIcon-Bp_Bh7vc.js";import{U as je}from"./user-CadCTWL6.js";import{B as $}from"./bell-BjJmD8pt.js";import{L as D,S as A}from"./shield-CwFdqbDz.js";import{D as M}from"./database-Cj7RBCxv.js";import{X as z}from"./x-BHP2hNWw.js";import{E as B}from"./eye-DsZQJS_t.js";import{P as Ne}from"./plus-D2CmEM8T.js";import{T as ve}from"./trash-2-BF0OiL1R.js";/**
 * @license lucide-react v0.307.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=R("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.307.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=R("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.307.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=R("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ee=()=>{const{user:ke}=me(),[j,G]=n.useState("account"),[Y,L]=n.useState(!1),[q,K]=n.useState(!0),[g,W]=n.useState(null),[N,H]=n.useState({username:"",email:"",fullName:"",phone:"",department:"",role:""}),[c,h]=n.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,alarmNotifications:!0,weeklyReports:!0,monthlyReports:!1,deviceOfflineAlerts:!0,thresholdAlerts:!0}),[x,p]=n.useState({theme:"dark",language:"en",timezone:"Asia/Karachi",dateFormat:"DD/MM/YYYY",temperatureUnit:"fahrenheit",refreshInterval:"10"}),[m,f]=n.useState({twoFactorAuth:!1,sessionTimeout:"30",passwordExpiry:"90",loginNotifications:!0}),Q=[{id:"account",label:"Account",icon:je},{id:"notifications",label:"Notifications",icon:$},{id:"display",label:"Display & Preferences",icon:J},{id:"security",label:"Security",icon:D},{id:"roles",label:"Roles & Permissions",icon:A},{id:"system",label:"System",icon:M}],[d,v]=n.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[C,X]=n.useState([]),[I,Z]=n.useState([]),[b,ee]=n.useState(null),[_,E]=n.useState(!1),[se,w]=n.useState(!1),[te,k]=n.useState(!1),[u,re]=n.useState(null),[P,ae]=n.useState([]),[i,y]=n.useState({username:"",email:"",password:"",role:"user"});n.useEffect(()=>{(async()=>{try{const t=await he();W(t),H({username:t.username||"",email:t.email||"",fullName:localStorage.getItem("user_fullname")||"",phone:localStorage.getItem("user_phone")||"",department:localStorage.getItem("user_department")||"Operations",role:t.role||""});const l=localStorage.getItem("settings_notifications"),a=localStorage.getItem("settings_display"),o=localStorage.getItem("settings_security");l&&h(JSON.parse(l)),a&&p(JSON.parse(a)),o&&f(JSON.parse(o))}catch(t){console.error("Failed to load user data:",t),r.error("Failed to load user settings")}finally{K(!1)}})()},[]),n.useEffect(()=>{j==="roles"&&S()},[j]);const S=async()=>{var s;E(!0);try{const[t,l]=await Promise.all([ue(),ge()]);if(X(t.data),Z(l.data),g){const a=await F(g.id);ee(a.data)}}catch(t){console.error("Failed to load roles:",t),((s=t.response)==null?void 0:s.status)===403?r.error("You do not have permission to view roles"):r.error("Failed to load roles and permissions")}finally{E(!1)}},le=async()=>{var s,t;if(!i.username||!i.email||!i.password){r.error("Please fill in all required fields");return}if(i.password.length<8){r.error("Password must be at least 8 characters");return}try{await pe({username:i.username,email:i.email,password:i.password,role:i.role}),r.success(`User "${i.username}" created successfully with role "${i.role}"`),w(!1),y({username:"",email:"",password:"",role:"user"}),S()}catch(l){if(console.error("Create user error:",l),(t=(s=l.response)==null?void 0:s.data)!=null&&t.detail){const a=l.response.data.detail;if(Array.isArray(a)){const o=a.map(U=>U.msg||U.message||JSON.stringify(U)).join(", ");r.error(`Validation error: ${o}`)}else typeof a=="string"?r.error(a):r.error(JSON.stringify(a))}else r.error("Failed to create user")}},ne=async(s,t)=>{var l,a;if(window.confirm(`Are you sure you want to delete user "${t}"?`))try{await fe(s),r.success(`User "${t}" deleted successfully`),S()}catch(o){console.error("Delete user error:",o),r.error(((a=(l=o.response)==null?void 0:l.data)==null?void 0:a.detail)||"Failed to delete user")}},ie=async s=>{re(s);try{const t=await F(s.id);ae(t.data.permissions||[]),k(!0)}catch(t){console.error("Failed to load user permissions:",t),r.error("Failed to load user permissions")}},oe=async(s,t)=>{var l,a;try{await T(s,{role:t}),r.success("User role updated successfully"),S(),k(!1)}catch(o){console.error("Failed to update user role:",o),r.error(((a=(l=o.response)==null?void 0:l.data)==null?void 0:a.detail)||"Failed to update user role")}},ce=async()=>{var s,t;L(!0);try{g&&(await T(g.id,{email:N.email}),localStorage.setItem("user_fullname",N.fullName),localStorage.setItem("user_phone",N.phone),localStorage.setItem("user_department",N.department)),localStorage.setItem("settings_notifications",JSON.stringify(c)),localStorage.setItem("settings_display",JSON.stringify(x)),localStorage.setItem("settings_security",JSON.stringify(m)),r.success("Settings saved successfully!")}catch(l){console.error("Save error:",l),r.error(((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.detail)||"Failed to save settings")}finally{L(!1)}},de=async()=>{var s,t,l;if(!d.currentPassword||!d.newPassword||!d.confirmPassword){r.error("Please fill in all password fields");return}if(d.newPassword!==d.confirmPassword){r.error("New passwords do not match");return}if(d.newPassword.length<8){r.error("New password must be at least 8 characters");return}try{await be(g.id,{current_password:d.currentPassword,new_password:d.newPassword}),r.success("Password changed successfully!"),v({currentPassword:"",newPassword:"",confirmPassword:""})}catch(a){console.error("Password change error:",a),console.error("Error response:",(s=a.response)==null?void 0:s.data);const o=(l=(t=a.response)==null?void 0:t.data)==null?void 0:l.detail;typeof o=="object"&&o.message?r.error(o.message):typeof o=="string"?r.error(o):r.error("Failed to change password")}},xe=()=>{switch(j){case"account":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),"Change Password"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",placeholder:"Enter current password",value:d.currentPassword,onChange:s=>v({...d,currentPassword:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",placeholder:"Enter new password (min 8 characters)",value:d.newPassword,onChange:s=>v({...d,newPassword:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:d.confirmPassword,onChange:s=>v({...d,confirmPassword:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:de,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update Password"})})]})});case"notifications":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-blue-600"}),"Notification Preferences"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via email"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.emailNotifications,onChange:s=>h({...c,emailNotifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive critical alerts via SMS"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.smsNotifications,onChange:s=>h({...c,smsNotifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Browser push notifications for real-time alerts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.pushNotifications,onChange:s=>h({...c,pushNotifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Alarm Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when alarms are triggered"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.alarmNotifications,onChange:s=>h({...c,alarmNotifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Device Offline Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Notify when devices go offline"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.deviceOfflineAlerts,onChange:s=>h({...c,deviceOfflineAlerts:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Weekly Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive weekly summary reports"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.weeklyReports,onChange:s=>h({...c,weeklyReports:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Monthly Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive monthly analytics reports"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.monthlyReports,onChange:s=>h({...c,monthlyReports:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})});case"display":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-blue-600"}),"Display & Preferences"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),e.jsxs("select",{value:x.theme,onChange:s=>p({...x,theme:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto (System)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),e.jsxs("select",{value:x.language,onChange:s=>p({...x,language:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ur",children:"Urdu (اردو)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs("select",{value:x.timezone,onChange:s=>p({...x,timezone:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Asia/Karachi",children:"Pakistan (PKT - UTC+5)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time (EST)"}),e.jsx("option",{value:"Europe/London",children:"London (GMT)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),e.jsxs("select",{value:x.dateFormat,onChange:s=>p({...x,dateFormat:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature Unit"}),e.jsxs("select",{value:x.temperatureUnit,onChange:s=>p({...x,temperatureUnit:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fahrenheit",children:"Fahrenheit (°F)"}),e.jsx("option",{value:"celsius",children:"Celsius (°C)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dashboard Refresh Interval"}),e.jsxs("select",{value:x.refreshInterval,onChange:s=>p({...x,refreshInterval:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"5",children:"5 seconds"}),e.jsx("option",{value:"10",children:"10 seconds"}),e.jsx("option",{value:"30",children:"30 seconds"}),e.jsx("option",{value:"60",children:"1 minute"})]})]})]})]})});case"security":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),"Security Settings"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.twoFactorAuth,onChange:s=>f({...m,twoFactorAuth:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Login Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified of new login attempts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.loginNotifications,onChange:s=>f({...m,loginNotifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),e.jsxs("select",{value:m.sessionTimeout,onChange:s=>f({...m,sessionTimeout:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"15",children:"15 minutes"}),e.jsx("option",{value:"30",children:"30 minutes"}),e.jsx("option",{value:"60",children:"1 hour"}),e.jsx("option",{value:"120",children:"2 hours"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Expiry (days)"}),e.jsxs("select",{value:m.passwordExpiry,onChange:s=>f({...m,passwordExpiry:s.target.value}),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"60",children:"60 days"}),e.jsx("option",{value:"90",children:"90 days"}),e.jsx("option",{value:"never",children:"Never"})]})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Login Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Current Session"}),e.jsx("p",{className:"text-sm text-gray-600",children:"IP: 192.168.1.100 • Chrome on Windows"})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Yesterday, 3:45 PM"}),e.jsx("p",{className:"text-sm text-gray-600",children:"IP: 192.168.1.100 • Chrome on Windows"})]}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Ended"})]})]})]})]});case"roles":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-blue-600"}),"User Management"]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Create User"]})]}),_?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Username"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t+1}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.username}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:s.email||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.role==="admin"?"bg-red-100 text-red-700":s.role==="user"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:s.role})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>ie(s),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(B,{className:"w-3.5 h-3.5"}),"View Details"]}),s.id!==(g==null?void 0:g.id)&&e.jsxs("button",{onClick:()=>ne(s.id,s.username),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),"Delete"]})]})})]},s.id))})]})})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),"Roles & Permissions"]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:"Connected to Backend"})]}),_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading roles..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:C.map(s=>{const t=I.filter(o=>o.role===s.name.toLowerCase()).length,a={admin:"bg-red-500",operator:"bg-blue-500",viewer:"bg-green-500",user:"bg-purple-500"}[s.name.toLowerCase()]||"bg-gray-500";return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),s.is_system&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"System Role"}),!s.is_active&&e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium rounded",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description||"No description"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx(V,{className:"w-3 h-3 inline mr-1"}),t," user",t!==1?"s":""," assigned"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>r.info("View role details - coming soon"),children:"View Details"})})]},s.id)})}),b&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Your Permissions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[b.permissions.slice(0,6).map((s,t)=>e.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded text-blue-700 border border-blue-200",children:s},t)),b.permissions.length>6&&e.jsxs("span",{className:"text-xs bg-white px-2 py-1 rounded text-blue-700 border border-blue-200",children:["+",b.permissions.length-6," more"]})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:["Current Role: ",e.jsx("strong",{children:b.roles.join(", ")})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-900",children:[e.jsx("strong",{children:"Status:"})," Role-Based Access Control (RBAC) is fully integrated with the backend. Only administrators can create, modify, or delete roles and assign them to users."]})})]})]})]});case"system":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-blue-600"}),"System Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"System Version"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"v2.1.0"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Database Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Connected"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"API Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Online"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"MQTT Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Connected"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Last Backup"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"2 hours ago"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Storage Used"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"3.2 GB / 100 GB"})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"System Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Backup Database"]}),e.jsxs("button",{className:"px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"View Audit Trail"]})]})]})]});default:return null}};return q?e.jsx(O,{children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})})}):e.jsx(O,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ye,{className:"w-8 h-8 text-blue-600"}),"Settings"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),e.jsxs("button",{onClick:ce,disabled:Y,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:[e.jsx(we,{className:"w-4 h-4"}),Y?"Saving...":"Save Changes"]})]})}),e.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex overflow-x-auto",children:Q.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>G(s.id),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors whitespace-nowrap ${j===s.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(t,{className:"w-4 h-4"}),s.label]},s.id)})})}),e.jsx("div",{className:"p-6",children:xe()})]}),te&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"User Details"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:u.username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:u.email||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:u.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created"}),e.jsx("p",{className:"text-gray-900 text-sm",children:new Date(u.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Change User Role"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:C.filter(s=>s.is_active).map(s=>e.jsxs("button",{onClick:()=>oe(u.id,s.name.toLowerCase()),className:`p-4 rounded-lg border-2 transition-all ${u.role===s.name.toLowerCase()?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.name.toLowerCase()==="admin"?"bg-red-100 text-red-700":s.name.toLowerCase()==="user"?"bg-purple-100 text-purple-700":s.name.toLowerCase()==="operator"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:s.name}),u.role===s.name.toLowerCase()&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),e.jsx("p",{className:"text-xs text-gray-600 text-left",children:s.description||"No description"})]},s.id))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Permissions (",P.length,")"]}),P.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto",children:P.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(A,{className:"w-3.5 h-3.5 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-900",children:s})]},t))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No permissions assigned"})]})]}),e.jsx("div",{className:"flex gap-3 mt-6",children:e.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})]})}),se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Create New User"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.username,onChange:s=>y({...i,username:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter username"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:i.email,onChange:s=>y({...i,email:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.password,onChange:s=>y({...i,password:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Min 8 characters"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assign Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:i.role,onChange:s=>y({...i,role:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:C.filter(s=>s.is_active).map(s=>e.jsxs("option",{value:s.name.toLowerCase(),children:[s.name," ",s.description?`- ${s.description}`:""]},s.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The user will be created with this role and its associated permissions"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:le,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Create User"})]})]})})]})})};export{Ee as default};
